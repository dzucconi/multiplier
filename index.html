<!DOCTYPE html>
<html>
  <head>
    <style>
      html,
      body {
        height: 100%;
        margin: 0;
        padding: 0;
      }

      img {
        margin: 0;
        vertical-align: bottom;
      }

      #stage {
        position: absolute;
        top: 50%;
        left: 50%;
      }

      #console {
        padding: 1em;
        font-family: monospace;
      }
    </style>

    <script>
      (function() {
        "use strict";

        var Multiplier = {
          model: function(params) {
            this.gif = params.gif || "img/rgb-short.gif";
            this.interval = params.interval || 33;
            this.x = params.x || 10;
            this.y = params.y || 5;
            this.multiple = this.x * this.y;
          },

          helpers: {
            getParams: function() {
              var i,
                hash,
                vars = {},
                hashes = window.location.href.slice(window.location.href.indexOf("?") + 1)
                                             .split("&");

              for (i = hashes.length - 1; i >= 0; i--) {
                hash = hashes[i].split("=");
                vars[hash[0]] = hash[1];
              }

              return vars;
            }
          },

          validateFileType: function(filename) {
            return /\.gif$/i.test(filename);
          },

          setStage: function(width, height) {
            this.stage.style.width = width + "px";
            this.stage.style.height = height + "px";
            this.stage.style.marginLeft = -(width / 2) + "px";
            this.stage.style.marginTop = -(height / 2) + "px";
          },

          initialize: function() {
            this.stage = document.getElementById("stage");
            this.console = document.getElementById("console");
            this.model = new Multiplier.model(Multiplier.helpers.getParams())
            
            var context = Multiplier,
                _img = new Image(),
                i = 0;
            
            if (!Multiplier.validateFileType(m.gif)) {
              console.innerHTML = "Only .gifs please";
            } else {
              _img.src = m.gif;
              _img.onload = function() {
                var width = (this.width * m.x),
                    height = (this.height * m.y);

                Multiplier.setStage(stage, width, height);

                (function append() {
                  setTimeout(function() {
                    if (i++ < m.multiple) {
                      var img = new Image();
                      img.src = m.gif + "?" + i;
                      
                      stage.appendChild(img);
                      append();
                    }
                  }, m.interval);
                }());
              };
            };
          }
        };

        document.addEventListener("DOMContentLoaded", Multiplier.initialize, false);
      }());
    </script>
  </head>
  
  <body>
    <div id="console"></div>
    <div id="stage"></div>
  </body>
</html>